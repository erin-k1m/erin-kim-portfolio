/* ---------- base visuals ---------- */
:root{
  --shelf-width: 500px;
  --book-height: 160px;
  --book-width: 30px;
  --book-depth: 20px;
  --bg:#f5f2ed;
  --wood1:#a06d4d;
  --wood2:#8b5a2b;
}
*{box-sizing:border-box}
body{
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  /* Warm homey bedroom gradient (soft peachy wall with subtle texture) */
  background: 
    radial-gradient(ellipse at 20% 30%, rgba(255,240,220,0.4) 0%, transparent 25%),
    radial-gradient(ellipse at 80% 70%, rgba(255,220,180,0.3) 0%, transparent 20%),
    linear-gradient(180deg, #f4dcc8 0%, #e8c9b0 50%, #ddb89a 100%);
  padding: 30px;
  display:flex; flex-direction:column; align-items:center;
  min-height:100vh;
  animation: day-to-night 30s ease-in-out infinite;
}

@keyframes day-to-night {
  0%, 50% {
    background: 
      radial-gradient(ellipse at 20% 30%, rgba(255,240,220,0.4) 0%, transparent 25%),
      radial-gradient(ellipse at 80% 70%, rgba(255,220,180,0.3) 0%, transparent 20%),
      linear-gradient(180deg, #ffdcd5 0%, #eeb3b3 50%, #c48080 100%);
  }
  51%, 100% {
    background: 
      radial-gradient(ellipse at 15% 10%, rgba(220,230,255,0.03) 0%, transparent 12%),
      linear-gradient(180deg, #435375, #0f1a2b);
  }
}

/* Window with sunlight */
.window {
  position: fixed;
  top: 60px;
  right: 80px;
  width: 200px;
  height: 280px;
  z-index: -1;
  background: linear-gradient(135deg, #8b7355 0%, #6b5644 100%);
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

.sky-background {
  position: absolute;
  inset: 12px;
  border-radius: 4px;
  background: linear-gradient(180deg, #87ceeb 0%, #b0d9f5 50%, #e0f4ff 100%);
  animation: sky-to-night 30s ease-in-out infinite;
  z-index: 0;
  pointer-events: none;
}

.window-frame {
  width: 100%;
  height: 100%;
  background: transparent;
  border-radius: 8px;
  padding: 12px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  gap: 10px;
  position: relative;
  z-index: 1;
}

.window-pane {
  background: rgba(255,255,255,0.15);
  border-radius: 4px;
  box-shadow: 
    inset 0 1px 3px rgba(255,255,255,0.6),
    inset 0 -1px 2px rgba(0,0,0,0.1);
  position: relative;
  z-index: 2;
}

@keyframes sky-to-night {
  0%, 50% {
    background: linear-gradient(180deg, #87ceeb 0%, #b0d9f5 50%, #e0f4ff 100%);
  }
  51%, 100% {
    background: linear-gradient(180deg, #0b1633 0%, #1a2545 50%, #2d3a5a 100%);
  }
}

.window-pane::after {
  content: '';
  position: absolute;
  top: 10%;
  left: 15%;
  width: 40%;
  height: 50%;
  background: radial-gradient(ellipse at center, rgba(255,255,255,0.4) 0%, transparent 70%);
  border-radius: 50%;
}

.sun {
  position: absolute;
  top: 50px;
  left:100px;
  width: 60px;
  height: 60px;
  background: radial-gradient(circle, 
    #fffacd 0%, 
    #ffd700 40%, 
    #ffb700 70%, 
    rgba(255,183,0,0) 100%);
  border-radius: 50%;
  box-shadow: 0 0 40px rgba(255,215,0,0.8);
  z-index: 1;
  animation: sunset 30s ease-in-out infinite;
}

@keyframes sunset {
  0%, 45% {
    opacity: 1;
    transform: translateY(0);
  }
  50% {
    opacity: 0;
    transform: translateY(200px);
  }
  51%, 100% {
    opacity: 0;
    transform: translateY(200px);
  }
}

.moon {
  position: absolute;
  top: 50px;
  left: 100px;
  width: 50px;
  height: 50px;
  background: radial-gradient(circle at 30% 30%, 
    #f0f0f0 0%, 
    #e8e8e8 50%, 
    #d0d0d0 100%);
  border-radius: 50%;
  box-shadow: 
    0 0 30px rgba(255,255,255,0.4),
    inset -5px -5px 10px rgba(0,0,0,0.1);
  z-index: 1;
  opacity: 0;
  transform: translateY(200px);
  animation: moonrise 30s ease-in-out infinite;
}

.moon::before {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  background: rgba(150,150,150,0.4);
  border-radius: 50%;
  top: 30%;
  left: 35%;
}

.moon::after {
  content: '';
  position: absolute;
  width: 6px;
  height: 6px;
  background: rgba(150,150,150,0.3);
  border-radius: 50%;
  top: 55%;
  left: 25%;
}

@keyframes moonrise {
  0%, 50% {
    opacity: 0;
    transform: translateY(200px);
  }
  55% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.sunlight {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 500px;
  height: 500px;
  background: radial-gradient(ellipse at center, 
    rgba(255,240,200,0.4) 0%, 
    rgba(255,230,180,0.2) 30%, 
    rgba(255,220,160,0.1) 50%, 
    transparent 70%);
  transform: translate(-30%, -30%);
  pointer-events: none;
  animation: sunlight-fade 30s ease-in-out infinite;
}

@keyframes sunlight-fade {
  0%, 45% { 
    opacity: 0.8;
  }
  50%, 100% { 
    opacity: 0;
  }
}

header{
  position: fixed;
  left: 100px;
  top: 50px;
  z-index: 100;
  margin-bottom: 0;
}

.header-image {
  max-width: 200px;
  height: auto;
  display: block;
}
.bookshelf-container{width:100%; display:flex; justify-content:center}
.bookshelf{
  position: relative;
  width:var(--shelf-width);
  background: linear-gradient(to bottom, var(--wood1), var(--wood2));
  padding:24px; border-radius:10px; 
  box-shadow:
    0 15px 40px rgba(0,0,0,.45),
    0 25px 60px rgba(0,0,0,.3),
    0 8px 20px rgba(0,0,0,.35),
    inset 0 -3px 10px rgba(0,0,0,.2),
    inset 0 2px 8px rgba(255,255,255,.08);
  display:flex; flex-direction:column; gap:28px;
  transform-style: preserve-3d;
  transform: perspective(1200px) rotateX(2deg);

}

/* Lamps and lighting -------------------------------------------------- */
.bookshelf-container{ 
  position:relative; 
  display:flex; 
  gap:28px; 
  align-items:flex-end; 
  justify-content:center; 
}

/* Moonlight overlay — subtle ambient from window (top-left) */
body::before{
  content: "";
  position:fixed; inset:0; pointer-events:none; z-index:0;
  background: radial-gradient(circle at 12% 8%, rgba(210,230,255,0.06) 0%, rgba(210,230,255,0.03) 6%, transparent 18%);
}

/* Darken book colors slightly to match night mood */
.book .front, .book .back, .spine { filter: brightness(.7) saturate(.9); }

/* Lamp wrapper sits on top of the bookshelf */

.lamp{ position:relative; width:64px; height:180px; display:flex; align-items:flex-end; justify-content:center; }
.lamp-base{ 
  width:50px; 
  height:18px; 
  background: linear-gradient(135deg, #8b5a2b 0%, #a0714f 50%, #6d4423 100%); 
  border-radius:50%; 
  box-shadow: 0 4px 8px rgba(0,0,0,.4), inset 0 -2px 4px rgba(0,0,0,.3); 
  transform:translateY(6px); 
}
.lamp-stem{ 
  width:10px; 
  height:80px; 
  background: linear-gradient(90deg, #6d4423 0%, #8b5a2b 50%, #5a3a1f 100%); 
  position:absolute; 
  bottom:0px; 
  border-radius:5px; 
  box-shadow: -2px 0 4px rgba(0,0,0,.3), 2px 0 4px rgba(0,0,0,.2); 
}
.lamp-shade{ 
  width:90px; 
  height:80px; 
  background: linear-gradient(180deg, #f5e6d3 0%, #e8d4b8 50%, #d4c0a0 100%); 
  border-radius: 4px 4px 8px 8px; 
  position:absolute; 
  bottom:75px; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  overflow:visible !important; 
  box-shadow: 0 8px 16px rgba(0,0,0,.3), inset 0 2px 6px rgba(255,255,255,.3); 
  transform-origin: center bottom; 
  transition: transform .18s ease; 
  z-index: 1;
  clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
}

/* Inner shade glow for gradient light effect */
.lamp-shade::after {
  content: '';
  position: absolute;
  inset: 8px;
  background: radial-gradient(ellipse at center, rgba(255, 240, 200, 0) 0%, rgba(255, 240, 200, 0) 100%);
  border-radius: inherit;
  opacity: 0;
  transition: opacity .25s ease;
  pointer-events: none;
}
.lamp-bulb{ width:8px; height:8px; background:radial-gradient(circle,#fff9e5 0%, #ffe9a0 100%); border-radius:50%; opacity:0; transform:scale(.4); transition: opacity .25s ease, transform .25s ease; box-shadow: 0 0 0px transparent; }

/* beaded pull string */
.lamp-cord {
  position: absolute;
  bottom: 60px;
  left: 50%;
  transform: translateX(calc(-50% + 20px));
  width: 2px;
  height: 60px;
  background: linear-gradient(180deg, rgba(100,100,100,0.6) 0%, rgba(80,80,80,0.8) 100%);
  z-index: 0;
}

.lamp-pull {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(calc(-50% + 20px));
  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  gap: 3px;
  align-items: center;
  z-index: 3;
}

.lamp-pull .bead {
  width: 8px;
  height: 8px;
  background: radial-gradient(circle at 30% 30%, #f0f0f0, #909090);
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0,0,0,0.5), inset 0 1px 2px rgba(255,255,255,0.6);
}

.lamp-pull:hover .bead {
  background: radial-gradient(circle at 30% 30%, #ffffff, #b0b0b0);
  box-shadow: 0 2px 6px rgba(0,0,0,0.6), inset 0 1px 2px rgba(255,255,255,0.7);
}

.lamp-pull:active {
  transform: translateX(calc(-50% + 20px)) translateY(4px);
}

.lamp-wrapper{ 
  position: absolute; 
  top: -442px; 
  right: 30px;
  width:120px; 
  display:flex; 
  align-items:flex-end; 
  justify-content:center; 
  pointer-events:auto; 
}

/* Lamp light effect applied to the scene when lamp is on */
body.lamp-on .lamp-wrapper::before{
  content: "";
  position:absolute; 
  top: 50%; 
  left: 50%; 
  transform: translate(-50%, -50%);
  width: 280px; 
  height: 280px;
  pointer-events:none; 
  z-index:-2;
  background: radial-gradient(circle, rgba(255, 235, 156, 0.5) 0%, rgba(255,244,200,0.35) 25%, rgba(255,244,200,0.18) 45%, rgba(255,244,210,0.08) 65%, transparent 80%);
  mix-blend-mode: screen; 
  transition: opacity .28s ease;
}

/* Highlight the bookshelf more when lamp is on */
body.lamp-on .bookshelf{ box-shadow: 0 10px 40px rgba(0,0,0,.3), 0 0 100px rgba(255,230,160,0.06) inset; }

/* lamp on visual state */
body.lamp-on .lamp-bulb{ opacity:0.7; transform:scale(1); box-shadow: 0 0 30px rgba(255,240,180,0.8), 0 0 60px rgba(255,240,180,0.4); }
body.lamp-on .lamp-shade::after{ opacity:1; background: radial-gradient(ellipse at center, rgba(255, 245, 220, 0.6) 0%, rgba(255, 240, 200, 0.3) 40%, rgba(255, 235, 180, 0.1) 70%, transparent 100%); }
body.lamp-on .lamp-shade{ transform: translateY(-4px) rotate(-2deg); }

@keyframes lamp-shimmy {
  0%, 100% { transform: translateY(-4px) rotate(-2deg); }
  15% { transform: translateY(-4px) rotate(-4deg); }
  30% { transform: translateY(-4px) rotate(1deg); }
  45% { transform: translateY(-4px) rotate(-3deg); }
  60% { transform: translateY(-4px) rotate(0.5deg); }
  75% { transform: translateY(-4px) rotate(-1.5deg); }
  90% { transform: translateY(-4px) rotate(-2deg); }
}

body.lamp-on .lamp-shade.shimmy {
  animation: lamp-shimmy 0.5s ease-out;
}

/* reduce default viewer brightness in night mode */
.book-viewer{ filter: brightness(.85); }

/* shelf */
.shelf{
  display:flex; align-items:flex-end; gap:18px; padding:14px;
  background: linear-gradient(to bottom, #c68642, #a06d4d);
  border-radius:6px; height:200px; position:relative;
  box-shadow: 
    inset 0 -6px 16px rgba(0,0,0,0.25),
    inset 0 2px 4px rgba(255,255,255,0.15),
    0 6px 12px rgba(0,0,0,0.4),
    0 3px 6px rgba(0,0,0,0.3),
    0 1px 3px rgba(0,0,0,0.25);
  border-bottom: 1px solid rgba(0,0,0,0.2);
}

/* Picture Frames */
.frame-wrapper {
  transition: none;
  margin-bottom: -10px;
}

/* Move bottom shelf frame to the right */
.bottom-shelf .frame-wrapper {
  margin-left: auto;
}

/* Move pot and right frame on middle shelf 30px more to the right */
.middle-shelf .flower-pot {
  margin-left: 30px;
}

.middle-shelf .frame-wrapper:last-of-type {
  margin-left: 30px;
}

.middle-shelf .frame-wrapper:last-of-type .picture-frame {
  width: 130px;
  height: 140px;
}

/* Diary/Sketchbook styling - smaller and different look */
.diary-wrapper {
  --diary-width: 70px;
  --diary-height: 100px;
  --diary-thickness: 15px;
}

.book.diary {
  width: var(--diary-width);
  height: var(--diary-height);
  --thickness: var(--diary-thickness);
}

.book.diary .front {
  background: linear-gradient(135deg, #8b7355 0%, #6b5644 50%, #5a4a3a 100%);
  font-size: 10px;
}

.book.diary .back {
  background: linear-gradient(135deg, #5a4a3a 0%, #4a3d2f 100%);
}

.book.diary .spine {
  background: linear-gradient(180deg, #6b5644, #4a3d2f);
}

.book.diary .pages {
  background: linear-gradient(0deg, #f5f2ed 0%, #e8e4dc 100%);
}

.book.diary .front.cover .cover-text {
  font-size: 9px;
  transform: rotate(0deg);
}

/* Move diary to the right */
.diary-wrapper {
  margin-left: auto;
}

/* Flower pot decoration */
.flower-pot {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: -15px;
}

.flower-pot .pot {
  width: 50px;
  height: 40px;
  background: linear-gradient(135deg, #5e2d12 0%, #8b5a3b 50%, #562d0c 100%);
  border-radius: 4px 4px 8px 8px;
  box-shadow: 
    0 3px 6px rgba(0,0,0,0.4),
    inset 0 -2px 4px rgba(0,0,0,0.3),
    inset 0 2px 3px rgba(255,255,255,0.2);
  position: relative;
  clip-path: polygon(0% 0%, 100% 0%, 85% 100%, 15% 100%);
}

.flower-pot .flowers {
  position: absolute;
  top: -32px;
  display: flex;
  gap: 0px;
  font-size: 30px;
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));
}

.flower-pot .flower {
  animation: gentle-sway 3s ease-in-out infinite;
  transform-origin: bottom center;
  margin: 0 -11px;
}

.flower-pot .flower:nth-child(1) {
  animation-delay: 0s;
}

.flower-pot .flower:nth-child(2) {
  animation-delay: 0.5s;
}

.flower-pot .flower:nth-child(3) {
  animation-delay: 1s;
}

@keyframes gentle-sway {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-3deg); }
  75% { transform: rotate(3deg); }
}

/* Teddy bear decoration - make it bigger */
.stuffed-animal {
  font-size: 80px;
  line-height: 1;
  margin-bottom: -10px;
}

.picture-frame {
  background: linear-gradient(135deg, #8b7355 0%, #6b5644 50%, #4a3d2f 100%);
  padding: 8px;
  box-shadow: 
    0 4px 8px rgba(0,0,0,0.4),
    inset 0 2px 4px rgba(255,255,255,0.2),
    inset 0 -2px 4px rgba(0,0,0,0.3);
  border-radius: 4px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.frame-border {
  position: absolute;
  inset: 4px;
  border: 2px solid rgba(139,115,85,0.5);
  border-radius: 2px;
  pointer-events: none;
}

.frame-image {
  font-size: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #f5f2ed 0%, #e8e4dc 100%);
  width: 100%;
  height: 100%;
  border-radius: 2px;
}

/* Different frame sizes */
.frame-small {
  width: 100px;
  height: 120px;
}

.frame-small .frame-image {
  font-size: 30px;
}

.frame-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.frame-wide {
  width: 170px;
  height: 120px;
}

.frame-wide .frame-image {
  font-size: 35px;
}

/* book-wrapper gives perspective */
.book-wrapper{ perspective: 2000px;
  transform-style: preserve-3d;
}

/* BOOK object (the 3D object we will animate) */
.book {
  width: var(--book-width);
  height: var(--book-height);
  position: relative;
  transform-style: preserve-3d;
  transform-origin: left center;
  transition: transform 0.55s cubic-bezier(.17,.67,.35,1.35), box-shadow .45s ease;
  cursor: pointer;
  user-select: none;
  margin-bottom: -13px;
}

/* faces */
.front, .back {
  position:absolute; inset:0;
  border-radius:2px;
  display:flex; align-items:center; justify-content:center;
  backface-visibility:hidden;
  color:#ffffff; font-weight:700; 
  box-shadow: 2px 4px 10px rgb(179, 172, 172);
  transform: rotateY(0deg) translateZ(calc(var(--thickness)/2.3));
}
.front, .back, .spine, .pages{
  transform-origin: center center;
}


/* front is the cover that will act as a movable flap (opens) */
.front {
  background: linear-gradient(0deg,#dc1616,#ef1313);
  z-index: 1;
  transform-origin: left center;
  transform: rotateY(0deg) translateZ(calc(var(--thickness)/2.3)) scaleZ(1.3);
  border-radius: 3px;

  /* subtle shadow along right edge to suggest thickness */
  box-shadow:
    2px 0 4px rgba(0,0,0,0.12), 
    inset -1px 0 2px rgba(128, 121, 121, 0.08); 
}

/* rotate only the text on the front cover (keeps cover face intact) */
.book .front.cover .cover-text {
  display: inline-block;              /* allow transforms on text box */
  transform: rotate(var(--cover-text-tilt, 90deg));
  transform-origin: center center;
  transition: transform 160ms ease;
  pointer-events: none;                /* clicks go to the book */
  padding: 0 6px;                     /* small breathing room so text doesn't sit at the very edge */
}

/* back sits behind pages */
.back {
  background: linear-gradient(0deg,#4e1c09,#7c3e2a);
  z-index: 1;
  transform-origin: center center;
  transform: rotateY(180deg) translateZ(calc(var(--thickness)/2)) scaleZ(1.2);
  border-radius: 3px;

  /* subtle shadow along left edge */
  box-shadow:
    -2px 0 4px rgba(0,0,0,0.12),  /* shadow toward pages/spine */
    inset 1px 0 2px rgba(0,0,0,0.08); /* inner page edge */
}

/* spine + pages faces */
.spine, .pages { position:absolute; top:0; height:100%; backface-visibility:hidden; }

/* thickness default; will be overwritten per-book in CSS or JS */
:root {
  --default-thickness: 20px; /* increased from 10px for thicker books */
}
.book { --thickness: var(--default-thickness); }

/* spine sits on left */
.spine {
  width: var(--thickness) * 2;
  left: calc(var(--thickness));
  background: linear-gradient(180deg,#8c3b3b,#b24a4a);
  transform: rotateY(90deg) translateZ(calc(var(--thickness)/2));
  border-radius: 2px;
  z-index: 1;

  /* subtle highlights on top/bottom */
  box-shadow: inset 0 1px 3px rgba(98, 92, 92, 0.551), inset 0 -1px 3px rgba(0,0,0,0.1);
}


/* pages block sits on right side */
/* --- Ghibli Ivory Cotton Paper --- */
.pages {
  width: var(--thickness);
  right: calc(var(--thickness) * -1);
  background: linear-gradient(0deg,#6f5349,#60443d);;
  transform: rotateY(90deg) translateZ(calc(var(--thickness)/-2));
  z-index: 6;
  border-radius: 2px;
  box-shadow:
    inset 0 0 6px rgba(104, 92, 92, 0.856), /* subtle overall depth */
    inset 0 6px 12px rgba(54, 28, 28, 0.845), /* top edge shadow */
    inset 0 -6px 12px rgba(62, 49, 49, 0.551); /*shadow on bottom edge*/
}




/* small random thickness pattern (GHIBLI style) */
.book-wrapper:nth-child(1) .book { --thickness: 25px; }
.book-wrapper:nth-child(2) .book { --thickness: 30px; }
.book-wrapper:nth-child(3) .book { --thickness: 20px; }
.book-wrapper:nth-child(4) .book { --thickness: 35px; }
.book-wrapper:nth-child(5) .book { --thickness: 26px; }
.book-wrapper:nth-child(6) .book { --thickness: 23px; }
.book-wrapper:nth-child(7) .book { --thickness: 32px; }
.book-wrapper:nth-child(8) .book { --thickness: 29px; }

/* per-book color variants */
.book-wrapper:nth-child(1) .front { background: linear-gradient(0deg, #dc1616, #ef1313); }
.book-wrapper:nth-child(1) .back { background: linear-gradient(0deg, #4e1c09, #7c3e2a); }
.book-wrapper:nth-child(1) .spine { background: linear-gradient(180deg, #8c3b3b, #b24a4a); }
.book-wrapper:nth-child(1) .pages { background: linear-gradient(0deg, #a63333, #8c2222); }

.book-wrapper:nth-child(2) .front { background: linear-gradient(0deg, #1a5f7a, #2b8fb5); }
.book-wrapper:nth-child(2) .back { background: linear-gradient(0deg, #0f3a4f, #1a5a7a); }
.book-wrapper:nth-child(2) .spine { background: linear-gradient(180deg, #1a5f7a, #2b8fb5); }
.book-wrapper:nth-child(2) .pages { background: linear-gradient(0deg, #1a4f6a, #0f3a5a); }

.book-wrapper:nth-child(3) .front { background: linear-gradient(0deg, #2d5f1f, #4a8a2b); }
.book-wrapper:nth-child(3) .back { background: linear-gradient(0deg, #1a3612, #2d5f1f); }
.book-wrapper:nth-child(3) .spine { background: linear-gradient(180deg, #2d5f1f, #4a8a2b); }
.book-wrapper:nth-child(3) .pages { background: linear-gradient(0deg, #214f16, #1a3612); }

.book-wrapper:nth-child(4) .front { background: linear-gradient(0deg, #4a2c5e, #6b4a8a); }
.book-wrapper:nth-child(4) .back { background: linear-gradient(0deg, #2a1a3e, #4a3a5e); }
.book-wrapper:nth-child(4) .spine { background: linear-gradient(180deg, #4a2c5e, #6b4a8a); }
.book-wrapper:nth-child(4) .pages { background: linear-gradient(0deg, #3a1a4e, #2a0a3e); }

.book-wrapper:nth-child(5) .front { background: linear-gradient(0deg, #6b4423, #8b5a3b); }
.book-wrapper:nth-child(5) .back { background: linear-gradient(0deg, #3d2817, #5a3e2b); }
.book-wrapper:nth-child(5) .spine { background: linear-gradient(180deg, #6b4423, #8b5a3b); }
.book-wrapper:nth-child(5) .pages { background: linear-gradient(0deg, #5a3818, #4a2810); }

.book-wrapper:nth-child(6) .front { background: linear-gradient(0deg, #7a5c3d, #a07a52); }
.book-wrapper:nth-child(6) .back { background: linear-gradient(0deg, #4a3a2a, #6a5a3f); }
.book-wrapper:nth-child(6) .spine { background: linear-gradient(180deg, #7a5c3d, #a07a52); }
.book-wrapper:nth-child(6) .pages { background: linear-gradient(0deg, #6a4c2d, #5a3c1f); }

.book-wrapper:nth-child(7) .front { background: linear-gradient(0deg, #5a2d2d, #8a3a3a); }
.book-wrapper:nth-child(7) .back { background: linear-gradient(0deg, #3a1a1a, #5a2d2d); }
.book-wrapper:nth-child(7) .spine { background: linear-gradient(180deg, #5a2d2d, #8a3a3a); }
.book-wrapper:nth-child(7) .pages { background: linear-gradient(0deg, #6a2a2a, #4a1a1a); }

.book-wrapper:nth-child(8) .front { background: linear-gradient(0deg, #2a4a6a, #3a6a9a); }
.book-wrapper:nth-child(8) .back { background: linear-gradient(0deg, #1a2a4a, #2a4a6a); }
.book-wrapper:nth-child(8) .spine { background: linear-gradient(180deg, #2a4a6a, #3a6a9a); }
.book-wrapper:nth-child(8) .pages { background: linear-gradient(0deg, #1a3a5a, #0a1a3a); }

/* tiny tilt variants per book to feel natural */
.book-wrapper:nth-child(odd) .book { transform: rotateZ(-5deg); }
.book-wrapper:nth-child(even) .book { transform: rotateZ(2deg); }

/* hover (spring) */
.book-wrapper:hover .book {
  transform: rotateY(-15deg) translateZ(14px) scale(1.06);
  box-shadow: 10px 14px 40px rgba(0, 0, 0, 0.58);
}

/* ---------- BOOK VIEWER (pull + open scene) ---------- */
.book-viewer{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  pointer-events:none;
}
.book-viewer.hidden{display:none}

.viewer-stage{
  width:95vw; max-width:95vw; height:90vh; background:transparent;
  pointer-events:auto; display:flex; align-items:center; justify-content:center;
}

/* book-scene: where cloned book appears and opens */
.book-scene{
  width:90vw; height:85vh; max-width:1400px; max-height:800px; perspective:2000px; position:relative;
  display:flex; align-items:center; justify-content:center;
}

/* cloned book container */
.cloned-book{
  width:min(80vw, 800px); height:min(70vh, 600px); transform-style:preserve-3d; position:relative;
  transform-origin: left center;
}

/* scaled faces for cloned book */
.cloned-book .front, .cloned-book .back {
  position:absolute; inset:0; border-radius:6px; backface-visibility:hidden;
  display:flex; align-items:center; justify-content:center; overflow:hidden;
}
.cloned-book .front{
  transform-origin:left center;
  z-index:4; background:#b34d4d; color:white; font-size:20px;
}
.cloned-book .back{background:#6e3d2b; color:#fff; transform: translateZ(-18px);}

/* per-cloned-book colors */
.cloned-book[data-project="project1"] .front { background: linear-gradient(0deg, #dc1616, #ef1313); }
.cloned-book[data-project="project1"] .back { background: linear-gradient(0deg, #4e1c09, #7c3e2a); }

.cloned-book[data-project="project2"] .front { background: linear-gradient(0deg, #1a5f7a, #2b8fb5); }
.cloned-book[data-project="project2"] .back { background: linear-gradient(0deg, #0f3a4f, #1a5a7a); }

.cloned-book[data-project="project3"] .front { background: linear-gradient(0deg, #2d5f1f, #4a8a2b); }
.cloned-book[data-project="project3"] .back { background: linear-gradient(0deg, #1a3612, #2d5f1f); }

.cloned-book[data-project="project4"] .front { background: linear-gradient(0deg, #4a2c5e, #6b4a8a); }
.cloned-book[data-project="project4"] .back { background: linear-gradient(0deg, #2a1a3e, #4a3a5e); }

.cloned-book[data-project="project5"] .front { background: linear-gradient(0deg, #6b4423, #8b5a3b); }
.cloned-book[data-project="project5"] .back { background: linear-gradient(0deg, #3d2817, #5a3e2b); }

.cloned-book[data-project="project6"] .front { background: linear-gradient(0deg, #7a5c3d, #a07a52); }
.cloned-book[data-project="project6"] .back { background: linear-gradient(0deg, #4a3a2a, #6a5a3f); }

.cloned-book[data-project="project7"] .front { background: linear-gradient(0deg, #5a2d2d, #8a3a3a); }
.cloned-book[data-project="project7"] .back { background: linear-gradient(0deg, #3a1a1a, #5a2d2d); }

.cloned-book[data-project="project8"] .front { background: linear-gradient(0deg, #2a4a6a, #3a6a9a); }
.cloned-book[data-project="project8"] .back { background: linear-gradient(0deg, #1a2a4a, #2a4a6a); }

/* pages container (the spread) */
.spread{
  position:absolute; left:0; top:0; width:100%; height:100%; transform-style:preserve-3d;
  display:flex; align-items:stretch; justify-content:center; pointer-events:auto;
  z-index:2; padding-left:60px; /* room for spine hinge */
}

/* each page face */
.page{
  width:50%; height:100%;
  padding:14px; font-size:16px; color:#000000;
  font-family: "Times New Roman", Times, serif;
  display:flex; align-items:center; justify-content:center;
  position:relative; overflow:hidden;
  transform-origin:left center;
  transition: transform .35s cubic-bezier(.4,.0,.2,1);

  /* --- Ghibli Ivory Cotton Paper --- */
  background: #ffffff;
  background-image:
    radial-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 1px),
    radial-gradient(rgba(0,0,0,0.04) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,0,0,0.08), rgba(0,0,0,0) 45%);
  background-size: 3px 3px, 3px 3px, 100% 100%;
  background-position: 0 0, 1.5px 1.5px, 0 0;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
}


/* page content image */
.page img{ max-width:100%; max-height:100%; object-fit:contain }

/* flipped pages (page turning) — the left page flips to reveal next */
.page.flipped{ transform: rotateY(-180deg); z-index:1; box-shadow:none; }

/* viewer controls */
.viewer-controls{ position:absolute; bottom:18px; left:50%; transform:translateX(-50%); display:flex; gap:10px; z-index:40;}
.ctrl{ padding:8px 12px; border-radius:6px; background:rgba(255,255,255,0.95); border:0; box-shadow:0 4px 12px rgba(0,0,0,.12); cursor:pointer;}
.ctrl.close{ background:#e66; color:white; }

/* helper - center label for clickability hint */
.viewer-hint{ position:absolute; top:10px; left:50%; transform:translateX(-50%); color:#fff; font-weight:600; text-shadow:0 2px 6px rgba(0,0,0,.5) }

/* responsive tweaks */
@media (max-width:880px){
  .viewer-stage{ height:92vh }
  .cloned-book{ width:85vw; height:65vh; max-width:600px; max-height:450px; }
  .book-scene{ width:90vw; height:88vh }
}
